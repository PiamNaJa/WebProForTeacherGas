<%- include("../partials/header.ejs") %>

<div class="container-fluid pt-0 ps-0">
  <div class="p-1 p-md-3 mb-2 text-white rounded bg-gradient">
    <div class="col-md-12 px-0 d-flex">
      <img class="me-3 my-auto songinfo--img" src="<%= song.image %>" width="150px" height="150px">
      <div class="d-block">
        <h3 class="m-0"><%= song.name %></h3>
        <a href="/artist/<%= song.artist._id %>" class="mb-1 text-white songinfo--artist"><%= song.artist.name %></a>
        <p class="mb-1 songinfo--genre">Genre : <%= song.genre %></p>
        <p class="mb-1 songinfo--date">Release Date :
          <%= song.release.getDate() %>/<%= song.release.getMonth() %>/<%= song.release.getFullYear() %></p>
          <div class="d-block">
          <% if(currentUser){ %>
            <button class="btn btn--play">
              <img src="/icon/blue_play.png" alt="play">
              <p class="d-inline m-0">Play</p>
            </button>
            <a class="btn--fav text-decoration-none mx-2" href="/user/<%= currentUser._id %>/addfavsong/<%= song._id %>">
              <i class="fa-solid fa-heart"></i>
            </a>
            <div class="btn-group dropend">
              <button type="button" class="p-0 btn--addplaylist " data-bs-toggle="dropdown" aria-expanded="false">
                <i class="fa-solid fa-plus"></i>
              </button>
              <ul class="dropdown-menu dropdown-menu-dark bg-black">
                <li>
                  <hr class="dropdown-divider">
                </li>
                <li><a class="dropdown-item" href="#">Add to New Playlist</a></li>
              </ul>
            </div>
            <%} else { %>
            <button type="button" class="border-0 bg-transparent btn--play" data-bs-toggle="modal" data-bs-target="#exampleModal">
              <i class="fa-solid fa-circle-play"></i>
            </button>
            <button type="button" class="btn--fav me-1 border-0 bg-transparent" data-bs-toggle="modal" data-bs-target="#exampleModal">
              <i class="fa-solid fa-heart"></i>
            </button>
            <button type="button" class="p-0 btn--addplaylist " data-bs-toggle="modal" data-bs-target="#exampleModal">
              <i class="fa-solid fa-plus"></i>
            </button>
            <%- include("../partials/login_modal.ejs") %>
            <% } %>          
          </div>
      </div>
    </div>
  </div>


  <div class="row g-5">
    <div class="col-md-8">
      <h2>Lyrics</h2>
      <p class="d-inline lyric"><%= song.lyric %> </p>
    </div>

    <div class="col-md-4">
      <div class="position-sticky" style="top: 4rem;">
        <div class="p-0 mb-3 bg-transparent border-start rounded">
          <h2 class="ps-2">Other Song</h2>
          <% otherSong.forEach((otherSong)=>{ %>
          <div class="p-2 ps-2 mb-1 othersong__block">
            <a class="othersong--name" href="/song/<%= otherSong._id %>"><%= otherSong.name %></a>
            <br>
            <a class="othersongartist--name" href="/artist/<%= otherSong.artist._id %>"><%= otherSong.artist.name %></a>
          </div>

          <% }); %>
        </div>
      </div>
    </div>
  </div>

</div>

<%- include("../partials/footer.ejs") %>