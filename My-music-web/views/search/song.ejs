<%- include("../partials/header.ejs") %>
<div class="filter mb-3">
    <a href="/search/<%= word %>/all" class="search--navigation"><h3 class="d-inline">All</h3></a>
    <h3 class="d-inline text-decoration-underline search--navigation-current">Songs</h3>
    <a href="/search/<%= word %>/artist" class="search--navigation"><h3 class="d-inline">Artists</h3></a>
    <a href="/search/<%= word %>/album" class="search--navigation"><h3 class="d-inline">Albums</h3></a>
</div>
<div class="col-md-12">
    <div class="table-responsive">
      <table class="table table-striped table-sm">
        <thead>
          <tr>
            <th class="text-white" id="number" scope="col">#</th>
            <th class="text-white" scope="col">Title</th>
            <th class="text-white" scope="col">Artist</th>
            <th class="text-white" scope="col">Album</th>
            <th class="text-white" scope="col">Genre</th>
            <th class="text-white" scope="col"></th>
          </tr>
        </thead>
        <% let i = 1;  %>
        <tbody>
          <% song.forEach((song)=>{ %>
            <tr class = "search-song__row" onpointerover="searchsongrow()">
              <td class="text-white" ><p class="my-3" id="number"><%=i++%></p></td>
              <td class="text-white" >
                  <img src="<%= song.image %>" width="60rem" height="60rem">
                  <a class="text-white text-decoration-none" href="/song/<%= song._id %>" id="song"><%= song.name %></a>
              </td>
              <td class="text-white" ><a class="text-white text-decoration-none" href="/song/<%= song.artist._id %>" id="song"><p class="my-3"><%= song.artist.name %></p></a></td>
              <% if(song.album){ %>
                <td class="text-white"><a class="text-white text-decoration-none" href="/album/<%= song.album._id %>" id="album"><p class="my-3"><%= song.album.name %></p></a></td>
                <% } else { %>
                <td></td>
                <% } %>
              <td class="text-white"><a class="text-white text-decoration-none" href="#"><p class="my-3"><%= song.genre %></p></a></td>
              <td id="tablebt">
                <% if(currentUser){ %>
                  <button type="button" class="my-auto bg-transparent border-0 my-3"><i class="fa-solid fa-play playbt--inrow"></i></button>
                  <a class="btn--fav text-decoration-none mx-2 my-3" href="/user/<%= currentUser._id %>/addfavsong/<%= song._id %>">
                    <i class="fa-solid fa-heart favbt--inrow"></i>
                  </a>
                  <div class="btn-group dropend">
                    <button type="button" class="p-0 btn--addplaylist pb-1 my-3" data-bs-toggle="dropdown" aria-expanded="false">
                      <i class="fa-solid fa-plus addplaylist--inrow"></i>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-dark bg-black">
                      <li><hr class="dropdown-divider"></li>
                      <li><a class="dropdown-item" href="#">Add to New Playlist</a></li>
                    </ul>
                  </div>
                  <% } else { %>
                    <button type="button" class="my-auto bg-transparent border-0 my-3" data-bs-toggle="modal" data-bs-target="#exampleModal">
                        <i class="fa-solid fa-play playbt--inrow"></i>
                      </button>
                      <button type="button" class="btn--fav bg-transparent border-0 mx-2 my-3" data-bs-toggle="modal" data-bs-target="#exampleModal">
                        <i class="fa-solid fa-heart favbt--inrow"></i>
                      </button>
                      <button type="button" class="p-0 btn--addplaylist pb-1 my-3" data-bs-toggle="modal" data-bs-target="#exampleModal">
                        <i class="fa-solid fa-plus addplaylist--inrow"></i>
                      </button>
                      <%- include("../partials/login_modal.ejs") %>
               <% } %> 
              </td>
            </tr>
          <% }); %>
        </tbody>
      </table>
    </div>
  </div>
<%- include("../partials/footer.ejs") %>